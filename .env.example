# SQS Messaging Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Messaging Driver
# =============================================================================
# Active driver: sqs or rabbitmq
MESSAGING_DRIVER=sqs
# Send messages to both SQS and RabbitMQ (for migration)
MESSAGING_DUAL_WRITE=false
# Fall back to RabbitMQ if SQS fails
MESSAGING_FALLBACK_TO_RABBITMQ=false

# =============================================================================
# AWS Configuration
# =============================================================================
AWS_SQS_ACCESS_KEY_ID=
AWS_SQS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-2

# =============================================================================
# SQS Settings
# =============================================================================
# Queue name prefix (usually environment: dev, staging, prod)
SQS_QUEUE_PREFIX=dev
# Automatically create queues on startup
SQS_AUTO_ENSURE=false
# Visibility timeout in seconds (how long a message is hidden after being received)
SQS_VISIBILITY_TIMEOUT=30
# Long polling wait time in seconds (max 20)
SQS_LONG_POLLING_WAIT=20
# Message retention period in days (max 14)
SQS_MESSAGE_RETENTION=14
# Number of receives before message goes to DLQ
SQS_DLQ_MAX_RECEIVE_COUNT=5
# Event types that need extended visibility timeout (comma-separated)
SQS_LONG_RUNNING_EVENTS=VideoProcessing,ReportGeneration,BulkEmailSend

# =============================================================================
# CloudWatch Metrics
# =============================================================================
SQS_CLOUDWATCH_ENABLED=true
SQS_CLOUDWATCH_NAMESPACE=SQS/MyService

# =============================================================================
# Target Queue Mappings
# =============================================================================
# Default queue for unmapped events
SQS_DEFAULT_TARGET_QUEUE=admission-service-queue
# Event to queue mappings (format: EVENT_TYPE:queue-name, comma-separated)
# Example: PaymentCreated:payment-queue,OrderCreated:order-queue
SQS_TARGET_QUEUE_MAPPINGS=

# =============================================================================
# Redis Configuration (for idempotency checking)
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# Database Configuration (for idempotency persistence)
# =============================================================================
# Driver: mysql or postgres
DB_CONNECTION=mysql
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=messaging
DB_USERNAME=root
DB_PASSWORD=
